main:
  # Use it as global variables they are prepended with every install
  commands:
  - export dotfiles_path=$HOME/.dotfiles
  - export vim_path=$dotfiles_path/.vim
  options:
    execute: true
    vim_path: $dotfiles_path/.vim

  extras:
    Brew package(s):
      command: brew install
      file: extras/brewfile
    Cask program(s):
      command: brew cask install
      file: extras/caskfile
    Defaults settings (Mac OSX):
      command: defaults write
      file: extras/defaultsfile
    Gem(s):
      command: gem install
      file: extras/gemfile
    npm(s):
      command: source $nodenv_path/nodenv.sh && npm i -g
      file: extras/npmfile
    pip(s):
      command: pip install
      file: extras/pipfile
  paths:
    default: ~/.dotfiles
    .zshrc: ~/

installs:
  else:
    .files:
      editor:
        path: general/editorconfig
        sym: ~/
      tmux-conf:
        path: general/tmux.conf
        sym: ~/
    .zshrc:
    - . $HOME/.asdf/asdf.sh
    - . $HOME/.asdf/completions/asdf.bash
    commands:
    # - xcode-select --install
    - yes '' | ruby -e "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/master/install)"
    # - rm -rf ~/.asdf || true
    - git clone https://github.com/asdf-vm/asdf.git ~/.asdf --branch v0.4.3

  git:
    .files:
      gitconfig:
        path: git/gitconfig.erb
        sym: ~/
      gitignore:
        path: git/gitignore
        sym: ~/
    erb_vars:
      name: Mahmoud Mahfouz
      email: mahmoud.mahfouz.zaza@gmail.com
      editor: vim

  asdf-golang:
    commands:
    - . $HOME/.asdf/asdf.sh && asdf plugin-add golang && asdf install golang 1.10.2 && asdf global golang 1.10.2
  asdf-ruby:
    commands:
    - . $HOME/.asdf/asdf.sh && asdf plugin-add ruby && asdf install ruby 2.4.1 && asdf global ruby 2.4.1
  asdf-nodejs:
    commands:
    - . $HOME/.asdf/asdf.sh && asdf plugin-add nodejs && asdf install nodejs 7.6.0 && asdf global nodejs 7.6.0
  asdf-python:
    commands:
    - . $HOME/.asdf/asdf.sh && asdf plugin-add python && asdf install python 3.6.5 && asdf install python 2.7.15 && asdf global python 3.6.5

  terminal:
    .files:
      aliases:
        path: terminal/aliases
        sym: ~/.dotfiles
      functions:
        path: terminal/functions
        sym: ~/.dotfiles
      profile:
        path: terminal/profile
        sym: ~/.dotfiles
      prompt:
        path: terminal/prompt
        sym: ~/.dotfiles
    .exports:
    - export ANDROID_HOME=/usr/local/Cellar/android-sdk/24.3.3/
    - export PATH=${PATH}:$ANDROID_HOME/tools:$ANDROID_HOME/platform-tools
    - export PATH=/usr/local/sbin:/usr/local/bin:$PATH
    - export PATH=$rbenv_path/shims:$rbenv_path/bin:$PATH
    - export PATH=/opt/chefdk/bin:$PATH

  tmuxinator:
    .files:
      coder.yml:
        path: tmuxinator/coder.yml
        sym: ~/.tmuxinator/
      landscape.yml:
        path: tmuxinator/landscape.yml
        sym: ~/.tmuxinator/
      portrait.yml:
        path: tmuxinator/portrait.yml
        sym: ~/.tmuxinator/
  vim:
    .files: # will use erb_vars from the current object
      vimrc:
        path: vim/vimrc.erb
        sym: ~/
      vim-settings:
        path: vim/vim-settings.erb
        sym: ~/.dotfiles
    .exports:
    - export vim_path=$vim_path
    - export EDITOR=vim
    commands:
    - if [[ -e $vim_path/bundle ]]; then rm -rf $vim_path/bundle; fi
    - git clone https://github.com/gmarik/Vundle.vim.git $vim_path/bundle/Vundle.vim
    erb_vars:
      vim_path: $dotfiles_path/.vim
      dotfiles_path: $dotfiles_path

  zsh:
    .files:
      zshrc:
        path: zsh/zshrc
        sym: ~/
    .exports:
    - export ZSH=$dotfiles_path'/zsh'
    - export ZSH_THEME="pygmalion"
    - export powerline="$HOME/.local/lib/python2.7/site-packages/powerline"
    - export LC_ALL=en_US.UTF-8
    - export LANG=en_US.UTF-8
    - export TERM=screen-256color
    commands:
    - export ZSH=$dotfiles_path'/zsh'
    - if [[ -e $ZSH ]]; then rm -rf $ZSH; fi
    - curl -L https://raw.github.com/robbyrussell/oh-my-zsh/master/tools/install.sh | sh
    - cd $ZSH/themes
    - git clone https://github.com/KuoE0/oh-my-zsh-solarized-powerline-theme.git solarized-powerline
    - cd solarized-powerline
    - ln -s $PWD/solarized-powerline.zsh-theme $ZSH/themes
    - cd $ZSH/ && git clone https://github.com/tarjoilija/zgen.git
